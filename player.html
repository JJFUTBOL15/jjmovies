<!-- player.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Player</title>
  <style>
    body, html { margin:0; padding:0; background:#000; height:100%; }
    #loading { 
      position: absolute; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%); 
      color: #ff4d4d; 
      font-family: Arial; 
    }
  </style>
</head>
<body>
  <div id="loading">Cargando película...</div>
  <iframe 
    id="player" 
    width="100%" 
    height="100%" 
    frameborder="0" 
    allowfullscreen
    src=""
  ></iframe>

  <script>
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');
    const season = params.get('season');
    const episode = params.get('episode');

    if (!id) {
      document.getElementById('loading').textContent = '❌ Falta ?id=';
    } else {
      // Llamar a TU PROPIO proxy
      let src = `/api/vidsrc?id=${id}`;
      if (season) src += `&season=${season}`;
      if (episode) src += `&episode=${episode}`;

      document.getElementById('player').src = src;
      document.getElementById('player').onload = () => {
        document.getElementById('loading').style.display = 'none';
      };
    }
  </script>
</body>
</html>
