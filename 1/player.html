<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproduciendo en JJMovies.lat</title>
    <style>
        body, html { margin:0; padding:0; height:100%; background:#000; color:white; font-family:Arial; overflow:hidden; }
        .container { position:relative; width:100%; height:100%; }
        iframe { width:100%; height:100%; border:none; }
        .title { position:absolute; top:20px; left:50%; transform:translateX(-50%); font-size:32px; z-index:10; text-shadow: 2px 2px 4px black; }
        .loading { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:28px; z-index:10; }
    </style>
</head>
<body>
    <div class="container">
        <div class="title" id="title">Cargando pel칤cula...</div>
        <div class="loading">Conectando al servidor pro...</div>
        <iframe id="player" allowfullscreen allow="autoplay"></iframe>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const season = params.get('season');
        const episode = params.get('episode');

        if (!id) {
            document.getElementById('title').textContent = 'Agrega ?id=NUMERO en la URL';
            document.querySelector('.loading').textContent = 'Ejemplo: ?id=299536';
            return;
        }

        // Fuentes arregladas diciembre 2025 (probadas con ID 299536, HD full, latino/subs ES)
        const sources = [
            // 1. VidSrc.to (el mejor ahora: cat치logo enorme como FlixHQ, carga r치pido)
            `https://vidsrc.to/embed/movie/${id}${season ? `/tv/${id}-${season}-${episode}` : ''}`,

            // 2. VikingEmbed (nuevo y potente, contenido fresco como Cuevana)
            `https://vembed.click/embed/movie/${id}${season ? `/tv/${id}-${season}-${episode}` : ''}`,

            // 3. SuperEmbed (estable, mucho latino)
            `https://player.superembed.stream/${season ? `tv/${id}/${season}/${episode}` : `movie/${id}`}`,

            // 4. MultiEmbed (fallback pro, con todo)
            `https://multiembed.mov/?video_id=${id}&tmdb=1${season ? `&s=${season}&e=${episode}` : ''}`
        ];

        const iframe = document.getElementById('player');
        let current = 0;

        function loadSource() {
            if (current < sources.length) {
                iframe.src = sources[current];
                current++;
            } else {
                document.querySelector('.loading').textContent = 'Prueba refrescar o otra pel칤cula 游땞';
            }
        }

        // T칤tulo autom치tico en espa침ol
        fetch(`https://api.themoviedb.org/3/${season ? 'tv' : 'movie'}/${id}?api_key=936410eebae74f9895643e085cc4a740&language=es-ES`)
            .then(res => res.json())
            .then(data => document.getElementById('title').textContent = data.title || data.name || 'JJMovies.lat');

        iframe.onload = () => document.querySelector('.loading').style.display = 'none';

        iframe.onerror = loadSource; // Auto pasa al siguiente si falla

        loadSource(); // Empieza con VidSrc.to
    </script>
</body>
</html>
